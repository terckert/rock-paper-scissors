<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@900&display=swap" rel="stylesheet">
    
    <title>Rock Paper Scissors</title>
</head>
<body>
    <header>
        <h1>Rock Paper Scissors</h1>
    </header>
    <main class="main">
        <div class="scoreboard">
            <div class="round-result">
                <p id="result">Choose your weapon</p>
                <p id="outcome">First to 5 wins</p>
            </div>
            <div class="weapon-choice">
                <div class="player">
                    <p class="player-choice btn-size" id="pChoice">&#x2753;</p>
                    <div class="score-line">
                        <p>Player:&nbsp;</p>
                        <p class="player-score" id="pScore">0</p>
                    </div>
                </div>
                <div class="computer">
                    <p class="computer-choice btn-size" id="cChoice">&#x2753;</p>
                    <div class="score-line">
                        <p>Computer:&nbsp;</p>
                        <p class="computer-score" id="cScore">0</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="selectors">
            <button class="btn-size btn" id="rockBtn">&#9994;</button>
            <button class="btn-size btn" id="paperBtn">&#9995;</button>
            <button class="btn-size btn" id="scissorsBtn">&#9996;</button>
        </div>
    </main>
    <footer class="footer">
        <p class="credit">Created by terckert 
            <script>document.write(new Date().getFullYear())</script>
        </p>
    </footer>
    <script type="text/javascript">
        //***************************************************************************
        // UI Constants
        const result = document.getElementById('result');   // win/loss
        const outcome = document.getElementById('outcome'); // Tie/'x beats y'
        
        // Player/Computer choices this round
        const pChoice = document.getElementById('pChoice'); // Player's choice
        const cChoice = document.getElementById('cChoice'); // Computer's choice
        
        // Scores to be updated
        const pScore = document.getElementById('pScore');   // Player score
        const cScore = document.getElementById('cScore');   // Computer Score
        
        // Player selection buttons
        const rockBtn = document.getElementById('rockBtn');     
        const paperBtn = document.getElementById('paperBtn');   
        const scissorsBtn = document.getElementById('scissorsBtn');
        //***************************************************************************
        // Game Logic
        // Global variables
        let playScore = 0;                          // Player score
        let compScore = 0;                          // Computer score

        function startRound(playerSelection) {
            let computerSelection = updateComputerChoice();
            updatePlayerChoice(playerSelection);
            updateRoundOutcome(playerSelection, computerSelection);

        }

        // Updates player choice frame
        function updatePlayerChoice(playerSelection) {
            switch (playerSelection) {
                case 'Rock':
                    pChoice.innerHTML = '&#9994;';
                    break;
                case 'Paper':
                    pChoice.innerHTML = '&#9995;';
                    break;
                case 'Scissors':
                    pChoice.innerHTML = '&#9996';
                    break;
            }
        }

        // Randomizes computer choice and upadtes frame. Returns value
        function updateComputerChoice()
        {
            let computerSelection = Math.floor(Math.random() * 3);
            switch (computerSelection) {
                case 0:     // Rock
                    cChoice.innerHTML = '&#9994';
                    computerSelection = 'Rock';
                    break;
                case 1:     // Paper
                    cChoice.innerHTML = '&#9995';
                    computerSelection = 'Paper';
                    break;
                case 2:     // Scissors
                    cChoice.innerHTML = '&#9996';
                    computerSelection = 'Scissors';
                    break;
            }

            return computerSelection;
        }
        
        // Update UI round outcome, win/loss/tie
        function updateRoundOutcome(playerSelection, computerSelection)
        {
            let roundOutcome = determineOutcome(playerSelection,computerSelection);
            
            switch (roundOutcome){
                case 'tie':
                    result.innerText = `It's a tie!`;
                    outcome.innerText = `Better luck next round...`;
                    return;
                case 'win':
                    result.innerText = `You won!`;
                    outcome.innerText = `${playerSelection} beats ${computerSelection}`;
                    pScore.innerText++;
                    return;
                case 'loss':
                    result.innerText = 'You lost...';
                    outcome.innerText = `${computerSelection} beats ${playerSelection}`;
                    cScore.innerText++;
                    return;
            }
            
        }
        
        // Determines if player won round
        function determineOutcome(playerSelection, computerSelection)
        {
            if (playerSelection == computerSelection) {
                return 'tie';
            } else if (             
                (playerSelection == 'Rock' && computerSelection == 'Scissors') ||
                (playerSelection == 'Paper' && computerSelection == 'Rock') ||
                (playerSelection == 'Scissors' && computerSelection == 'Paper') 
            ) {
                return 'win';
            } else {
                return 'loss';
            }
        }
        //***************************************************************************
        // Event Listeners -- Starts a round of RPS with the player's selection.
        rockBtn.addEventListener('click', ()=>startRound('Rock'));
        paperBtn.addEventListener('click', ()=>startRound('Paper'));
        scissorsBtn.addEventListener('click', ()=>startRound('Scissors'));
    </script>
    <script type="text/javascript" src="./scripts/script.js"></script>
</body>
</html>